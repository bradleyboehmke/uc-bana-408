<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Lesson 2a: Feature engineering | Data Mining with R</title>
  <meta name="description" content="Master the art of data wrangling &amp; analysis with the R programming language." />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Lesson 2a: Feature engineering | Data Mining with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Master the art of data wrangling &amp; analysis with the R programming language." />
  <meta name="github-repo" content="bradleyboehmke/uc-bana-7025" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Lesson 2a: Feature engineering | Data Mining with R" />
  <meta name="twitter:site" content="@bradleyboehmke" />
  <meta name="twitter:description" content="Master the art of data wrangling &amp; analysis with the R programming language." />
  

<meta name="author" content="Bradley Boehmke" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="overview-1.html"/>
<link rel="next" href="lesson-2b-model-evaluation-selection.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.9/grViz.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">UC BANA 4080: Data Mining</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i>Learning Objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#material"><i class="fa fa-check"></i>Material</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#class-structure"><i class="fa fa-check"></i>Class Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conventions-used-in-this-book"><i class="fa fa-check"></i>Conventions used in this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#feedback"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I Module 1</b></span></li>
<li class="chapter" data-level="1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="overview.html"><a href="overview.html#learning-objectives-1"><i class="fa fa-check"></i><b>1.1</b> Learning objectives</a></li>
<li class="chapter" data-level="1.2" data-path="overview.html"><a href="overview.html#estimated-time-requirement"><i class="fa fa-check"></i><b>1.2</b> Estimated time requirement</a></li>
<li class="chapter" data-level="1.3" data-path="overview.html"><a href="overview.html#tasks"><i class="fa fa-check"></i><b>1.3</b> Tasks</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html"><i class="fa fa-check"></i><b>2</b> Lesson 1a: Intro to machine learning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#learning-objectives-2"><i class="fa fa-check"></i><b>2.1</b> Learning objectives</a></li>
<li class="chapter" data-level="2.2" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#supervised-learning"><i class="fa fa-check"></i><b>2.2</b> Supervised learning</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#regression-problems"><i class="fa fa-check"></i><b>2.2.1</b> Regression problems</a></li>
<li class="chapter" data-level="2.2.2" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#classification-problems"><i class="fa fa-check"></i><b>2.2.2</b> Classification problems</a></li>
<li class="chapter" data-level="2.2.3" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#knowledge-check"><i class="fa fa-check"></i><b>2.2.3</b> Knowledge check</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#unsupervised-learning"><i class="fa fa-check"></i><b>2.3</b> Unsupervised learning</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#knowledge-check-1"><i class="fa fa-check"></i><b>2.3.1</b> Knowledge check</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#machine-learning-in"><i class="fa fa-check"></i><b>2.4</b> Machine Learning in <svg aria-hidden="true" role="img" viewBox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#knowledge-check-2"><i class="fa fa-check"></i><b>2.4.1</b> Knowledge check</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#the-data-sets"><i class="fa fa-check"></i><b>2.5</b> The data sets</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#boston-housing"><i class="fa fa-check"></i><b>2.5.1</b> Boston housing</a></li>
<li class="chapter" data-level="2.5.2" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#pima-indians-diabetes"><i class="fa fa-check"></i><b>2.5.2</b> Pima Indians Diabetes</a></li>
<li class="chapter" data-level="2.5.3" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#iris-flowers"><i class="fa fa-check"></i><b>2.5.3</b> Iris flowers</a></li>
<li class="chapter" data-level="2.5.4" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#ames-housing"><i class="fa fa-check"></i><b>2.5.4</b> Ames housing</a></li>
<li class="chapter" data-level="2.5.5" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#attrition"><i class="fa fa-check"></i><b>2.5.5</b> Attrition</a></li>
<li class="chapter" data-level="2.5.6" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#hitters"><i class="fa fa-check"></i><b>2.5.6</b> Hitters</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#what-youll-learn-next"><i class="fa fa-check"></i><b>2.6</b> What You’ll Learn Next</a></li>
<li class="chapter" data-level="2.7" data-path="lesson-1a-intro-to-machine-learning.html"><a href="lesson-1a-intro-to-machine-learning.html#exercises"><i class="fa fa-check"></i><b>2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html"><i class="fa fa-check"></i><b>3</b> Lesson 1b: First model with Tidymodels</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#learning-objectives-3"><i class="fa fa-check"></i><b>3.1</b> Learning objectives</a></li>
<li class="chapter" data-level="3.2" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#prerequisites"><i class="fa fa-check"></i><b>3.2</b> Prerequisites</a></li>
<li class="chapter" data-level="3.3" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#data-splitting"><i class="fa fa-check"></i><b>3.3</b> Data splitting</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#simple-random-sampling"><i class="fa fa-check"></i><b>3.3.1</b> Simple random sampling</a></li>
<li class="chapter" data-level="3.3.2" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#stratified-sampling"><i class="fa fa-check"></i><b>3.3.2</b> Stratified sampling</a></li>
<li class="chapter" data-level="3.3.3" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#knowledge-check-3"><i class="fa fa-check"></i><b>3.3.3</b> Knowledge check</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#building-models"><i class="fa fa-check"></i><b>3.4</b> Building models</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#knowledge-check-4"><i class="fa fa-check"></i><b>3.4.1</b> Knowledge check</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#making-predictions"><i class="fa fa-check"></i><b>3.5</b> Making predictions</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#knowledge-check-5"><i class="fa fa-check"></i><b>3.5.1</b> Knowledge check</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#evaluating-model-performance"><i class="fa fa-check"></i><b>3.6</b> Evaluating model performance</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#regression-models"><i class="fa fa-check"></i><b>3.6.1</b> Regression models</a></li>
<li class="chapter" data-level="3.6.2" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#classification-models"><i class="fa fa-check"></i><b>3.6.2</b> Classification models</a></li>
<li class="chapter" data-level="3.6.3" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#knowledge-check-6"><i class="fa fa-check"></i><b>3.6.3</b> Knowledge check</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="lesson-1b-first-model-with-tidymodels.html"><a href="lesson-1b-first-model-with-tidymodels.html#exercises-1"><i class="fa fa-check"></i><b>3.7</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Module 2</b></span></li>
<li class="chapter" data-level="4" data-path="overview-1.html"><a href="overview-1.html"><i class="fa fa-check"></i><b>4</b> Overview</a>
<ul>
<li class="chapter" data-level="4.1" data-path="overview-1.html"><a href="overview-1.html#learning-objectives-4"><i class="fa fa-check"></i><b>4.1</b> Learning objectives</a></li>
<li class="chapter" data-level="4.2" data-path="overview-1.html"><a href="overview-1.html#estimated-time-requirement-1"><i class="fa fa-check"></i><b>4.2</b> Estimated time requirement</a></li>
<li class="chapter" data-level="4.3" data-path="overview-1.html"><a href="overview-1.html#tasks-1"><i class="fa fa-check"></i><b>4.3</b> Tasks</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html"><i class="fa fa-check"></i><b>5</b> Lesson 2a: Feature engineering</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#learning-objectives-5"><i class="fa fa-check"></i><b>5.1</b> Learning objectives</a></li>
<li class="chapter" data-level="5.2" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#prerequisites-1"><i class="fa fa-check"></i><b>5.2</b> Prerequisites</a></li>
<li class="chapter" data-level="5.3" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#create-a-recipe"><i class="fa fa-check"></i><b>5.3</b> Create a recipe</a></li>
<li class="chapter" data-level="5.4" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#feature-filtering"><i class="fa fa-check"></i><b>5.4</b> Feature filtering</a></li>
<li class="chapter" data-level="5.5" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#numeric-features"><i class="fa fa-check"></i><b>5.5</b> Numeric features</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#skewness"><i class="fa fa-check"></i><b>5.5.1</b> Skewness</a></li>
<li class="chapter" data-level="5.5.2" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#standardization"><i class="fa fa-check"></i><b>5.5.2</b> Standardization</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#categorical-features"><i class="fa fa-check"></i><b>5.6</b> Categorical features</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#one-hot-dummy-encoding"><i class="fa fa-check"></i><b>5.6.1</b> One-hot &amp; dummy encoding</a></li>
<li class="chapter" data-level="5.6.2" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#ordinal-encoding"><i class="fa fa-check"></i><b>5.6.2</b> Ordinal encoding</a></li>
<li class="chapter" data-level="5.6.3" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#lumping"><i class="fa fa-check"></i><b>5.6.3</b> Lumping</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#fit-a-model-with-a-recipe"><i class="fa fa-check"></i><b>5.7</b> Fit a model with a recipe</a></li>
<li class="chapter" data-level="5.8" data-path="lesson-2a-feature-engineering.html"><a href="lesson-2a-feature-engineering.html#exercises-2"><i class="fa fa-check"></i><b>5.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html"><i class="fa fa-check"></i><b>6</b> Lesson 2b: Model evaluation &amp; selection</a>
<ul>
<li class="chapter" data-level="6.1" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#learning-objectives-6"><i class="fa fa-check"></i><b>6.1</b> Learning objectives</a></li>
<li class="chapter" data-level="6.2" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#prerequisites-2"><i class="fa fa-check"></i><b>6.2</b> Prerequisites</a></li>
<li class="chapter" data-level="6.3" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#resampling-cross-validation"><i class="fa fa-check"></i><b>6.3</b> Resampling &amp; cross-validation</a></li>
<li class="chapter" data-level="6.4" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#k-fold-cross-validation"><i class="fa fa-check"></i><b>6.4</b> K-fold cross-validation</a></li>
<li class="chapter" data-level="6.5" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#hyperparameter-tuning"><i class="fa fa-check"></i><b>6.5</b> Hyperparameter tuning</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#bias"><i class="fa fa-check"></i><b>6.5.1</b> Bias</a></li>
<li class="chapter" data-level="6.5.2" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#variance"><i class="fa fa-check"></i><b>6.5.2</b> Variance</a></li>
<li class="chapter" data-level="6.5.3" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#hyperparameters"><i class="fa fa-check"></i><b>6.5.3</b> Hyperparameters</a></li>
<li class="chapter" data-level="6.5.4" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#full-cartesian-grid-search"><i class="fa fa-check"></i><b>6.5.4</b> Full cartesian grid search</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#finalizing-our-model"><i class="fa fa-check"></i><b>6.6</b> Finalizing our model</a></li>
<li class="chapter" data-level="6.7" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#exercises-3"><i class="fa fa-check"></i><b>6.7</b> Exercises</a></li>
<li class="chapter" data-level="6.8" data-path="lesson-2b-model-evaluation-selection.html"><a href="lesson-2b-model-evaluation-selection.html#additional-resources"><i class="fa fa-check"></i><b>6.8</b> Additional resources</a></li>
</ul></li>
<li class="part"><span><b>III Module 3</b></span></li>
<li class="chapter" data-level="7" data-path="overview-2.html"><a href="overview-2.html"><i class="fa fa-check"></i><b>7</b> Overview</a>
<ul>
<li class="chapter" data-level="7.1" data-path="overview-2.html"><a href="overview-2.html#learning-objectives-7"><i class="fa fa-check"></i><b>7.1</b> Learning objectives</a></li>
<li class="chapter" data-level="7.2" data-path="overview-2.html"><a href="overview-2.html#estimated-time-requirement-2"><i class="fa fa-check"></i><b>7.2</b> Estimated time requirement</a></li>
<li class="chapter" data-level="7.3" data-path="overview-2.html"><a href="overview-2.html#tasks-2"><i class="fa fa-check"></i><b>7.3</b> Tasks</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html"><i class="fa fa-check"></i><b>8</b> Lesson 3a: Linear Regression</a>
<ul>
<li class="chapter" data-level="8.1" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#learning-objectives-8"><i class="fa fa-check"></i><b>8.1</b> Learning objectives</a></li>
<li class="chapter" data-level="8.2" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#prerequisites-3"><i class="fa fa-check"></i><b>8.2</b> Prerequisites</a></li>
<li class="chapter" data-level="8.3" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#simple-linear-regression"><i class="fa fa-check"></i><b>8.3</b> Simple linear regression</a></li>
<li class="chapter" data-level="8.4" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#estimation"><i class="fa fa-check"></i><b>8.4</b> Estimation</a></li>
<li class="chapter" data-level="8.5" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#inference"><i class="fa fa-check"></i><b>8.5</b> Inference</a></li>
<li class="chapter" data-level="8.6" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#multiple-linear-regression"><i class="fa fa-check"></i><b>8.6</b> Multiple linear regression</a></li>
<li class="chapter" data-level="8.7" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#assessing-model-accuracy"><i class="fa fa-check"></i><b>8.7</b> Assessing model accuracy</a></li>
<li class="chapter" data-level="8.8" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#feature-importance"><i class="fa fa-check"></i><b>8.8</b> Feature importance</a></li>
<li class="chapter" data-level="8.9" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#final-thoughts"><i class="fa fa-check"></i><b>8.9</b> Final thoughts</a></li>
<li class="chapter" data-level="8.10" data-path="lesson-3a-linear-regression.html"><a href="lesson-3a-linear-regression.html#exercises-4"><i class="fa fa-check"></i><b>8.10</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>IV Additional Content</b></span></li>
<li class="chapter" data-level="" data-path="computing-environment.html"><a href="computing-environment.html"><i class="fa fa-check"></i>Computing Environment</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://www.uc.edu/" target="blank">University of Cincinnati</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Mining with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lesson-2a-feature-engineering" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Lesson 2a: Feature engineering<a href="lesson-2a-feature-engineering.html#lesson-2a-feature-engineering" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Data preprocessing and engineering techniques generally refer to the addition, deletion, or transformation of data. In this lesson we introduce you to another tidymodels package, <a href="https://recipes.tidymodels.org/"><strong>recipes</strong></a>, which is designed to help you preprocess your data before training your model. Recipes are built as a series of preprocessing steps, such as:</p>
<ul>
<li>converting qualitative predictors to indicator variables (also known as dummy variables),</li>
<li>transforming data to be on a different scale (e.g., taking the logarithm of a variable),</li>
<li>transforming whole groups of predictors together,
extracting key features from raw variables (e.g., getting the day of the week out of a date variable),</li>
</ul>
<p>and so on. Although there is an ever-growing number of ways to preprocess your data, we’ll focus on a few common feature engineering steps applied to numeric and categorical data. This will provide you with a foundation of how to perform feature engineering.</p>
<div id="learning-objectives-5" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Learning objectives<a href="lesson-2a-feature-engineering.html#learning-objectives-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>By the end of this lesson you’ll be able to:</p>
<ul>
<li>Explain how to apply feature engineering steps with the <strong>recipes</strong> package.</li>
<li>Filter out low informative features.</li>
<li>Normalize and standardize numeric features.</li>
<li>Pre-process nominal and ordinal features.</li>
<li>Combine multiple feature engineering steps into one recipe and train a model with it.</li>
</ul>
</div>
<div id="prerequisites-1" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Prerequisites<a href="lesson-2a-feature-engineering.html#prerequisites-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For this lesson we’ll use the <strong>recipes</strong> package with is automatically loaded with <strong>tidymodels</strong> and we’ll use the <code>ames</code> housing data.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="lesson-2a-feature-engineering.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb24-2"><a href="lesson-2a-feature-engineering.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-3"><a href="lesson-2a-feature-engineering.html#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="lesson-2a-feature-engineering.html#cb24-4" aria-hidden="true" tabindex="-1"></a>ames_data_path <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ames.csv&quot;</span>)</span>
<span id="cb24-5"><a href="lesson-2a-feature-engineering.html#cb24-5" aria-hidden="true" tabindex="-1"></a>ames <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(ames_data_path)</span></code></pre></div>
<p>Let’s go ahead and create our train-test split:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="lesson-2a-feature-engineering.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create train/test split</span></span>
<span id="cb25-2"><a href="lesson-2a-feature-engineering.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)  <span class="co"># for reproducibility</span></span>
<span id="cb25-3"><a href="lesson-2a-feature-engineering.html#cb25-3" aria-hidden="true" tabindex="-1"></a>split  <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(ames, <span class="at">prop =</span> <span class="fl">0.7</span>)</span>
<span id="cb25-4"><a href="lesson-2a-feature-engineering.html#cb25-4" aria-hidden="true" tabindex="-1"></a>train  <span class="ot">&lt;-</span> <span class="fu">training</span>(split)</span>
<span id="cb25-5"><a href="lesson-2a-feature-engineering.html#cb25-5" aria-hidden="true" tabindex="-1"></a>test   <span class="ot">&lt;-</span> <span class="fu">testing</span>(split)</span></code></pre></div>
</div>
<div id="create-a-recipe" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Create a recipe<a href="lesson-2a-feature-engineering.html#create-a-recipe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To get started, let’s create a model recipe that we will build upon and apply in a model downstream. Before training the model, we can use a recipe to create and/or modify predictors and conduct some preprocessing required by the model.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="lesson-2a-feature-engineering.html#cb26-1" aria-hidden="true" tabindex="-1"></a>ames_recipe <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Sale_Price <span class="sc">~</span> ., <span class="at">data =</span> train)</span></code></pre></div>
<p>Now we can start adding steps onto our recipe using the pipe operator and applying specific feature engineering tasks. The sections that follow provide some discussion as to why we apply each feature engineering step and then we demonstrate how to add it to our recipe.</p>
</div>
<div id="feature-filtering" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Feature filtering<a href="lesson-2a-feature-engineering.html#feature-filtering" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In many data analyses and modeling projects we end up with hundreds or even thousands of collected features. From a practical perspective, a model with more features often becomes harder to interpret and is costly to compute. Some models are more resistant to non-informative predictors (e.g., the Lasso and tree-based methods) than others.</p>
<p>Although the performance of some of our models are not significantly affected by non-informative predictors, the time to train these models can be negatively impacted as more features are added. Consequently, filtering or reducing features prior to modeling may significantly speed up training time.</p>
<p>Zero and near-zero variance variables are low-hanging fruit to eliminate. Zero variance variables, meaning the feature only contains a single unique value, provides no useful information to a model. Some algorithms are unaffected by zero variance features. However, features that have near-zero variance also offer very little, if any, information to a model. Furthermore, they can cause problems during resampling as there is a high probability that a given sample will only contain a single unique value (the dominant value) for that feature.</p>
<div class="tip">
<p>
A rule of thumb for detecting near-zero variance features are
identifying and removing features with <span class="math inline"><span class="math inline">\(\leq 5-10\)</span></span>% variance.
</p>
</div>
<p>For the Ames data, we do not have any zero variance predictors but there are many features that meet the near-zero threshold. The following shows all features where there is less than 5% variance in distinct values.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
rowname
</th>
<th style="text-align:right;">
freqRatio
</th>
<th style="text-align:right;">
percentUnique
</th>
<th style="text-align:left;">
zeroVar
</th>
<th style="text-align:left;">
nzv
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Street
</td>
<td style="text-align:right;">
292.00000
</td>
<td style="text-align:right;">
0.0975134
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Alley
</td>
<td style="text-align:right;">
23.60494
</td>
<td style="text-align:right;">
0.1462701
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Utilities
</td>
<td style="text-align:right;">
2049.00000
</td>
<td style="text-align:right;">
0.1462701
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Land_Slope
</td>
<td style="text-align:right;">
22.18182
</td>
<td style="text-align:right;">
0.1462701
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Land_Contour
</td>
<td style="text-align:right;">
21.45349
</td>
<td style="text-align:right;">
0.1950268
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Kitchen_AbvGr
</td>
<td style="text-align:right;">
21.25000
</td>
<td style="text-align:right;">
0.1950268
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Pool_QC
</td>
<td style="text-align:right;">
680.66667
</td>
<td style="text-align:right;">
0.2437835
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Roof_Matl
</td>
<td style="text-align:right;">
144.64286
</td>
<td style="text-align:right;">
0.2925402
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Bsmt_Cond
</td>
<td style="text-align:right;">
20.76136
</td>
<td style="text-align:right;">
0.2925402
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Heating
</td>
<td style="text-align:right;">
100.90000
</td>
<td style="text-align:right;">
0.2925402
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Misc_Feature
</td>
<td style="text-align:right;">
27.40278
</td>
<td style="text-align:right;">
0.2925402
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFin_Type_2
</td>
<td style="text-align:right;">
25.77941
</td>
<td style="text-align:right;">
0.3412969
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Condition_2
</td>
<td style="text-align:right;">
202.70000
</td>
<td style="text-align:right;">
0.3900536
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Functional
</td>
<td style="text-align:right;">
39.72917
</td>
<td style="text-align:right;">
0.3900536
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Pool_Area
</td>
<td style="text-align:right;">
2042.00000
</td>
<td style="text-align:right;">
0.4875670
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Three_season_porch
</td>
<td style="text-align:right;">
675.33333
</td>
<td style="text-align:right;">
0.9751341
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Low_Qual_Fin_SF
</td>
<td style="text-align:right;">
504.50000
</td>
<td style="text-align:right;">
1.4139444
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
Misc_Val
</td>
<td style="text-align:right;">
141.00000
</td>
<td style="text-align:right;">
1.5114578
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
</tbody>
</table>
<p>We can filter out near-zero variance features with <code>step_nzv()</code>. Within <code>step_nzv()</code> we specify which features to apply this to. There are several helper functions to make it easy to apply the step to <code>all_predictors()</code>, <code>all_numeric()</code> variables, <code>all_nominal()</code> variables, and more.</p>
<div class="tip">
<p>
See the different variable selectors <a
href="https://recipes.tidymodels.org/reference/has_role.html#ref-usage">here</a>.
</p>
</div>
<p>In this example we filter out all predictor variables that have less than 10% variance in values.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="lesson-2a-feature-engineering.html#cb27-1" aria-hidden="true" tabindex="-1"></a>nzv <span class="ot">&lt;-</span> ames_recipe <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="lesson-2a-feature-engineering.html#cb27-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_nzv</span>(<span class="fu">all_predictors</span>(), <span class="at">unique_cut =</span> <span class="dv">10</span>) <span class="co"># threshold as % (10%)</span></span></code></pre></div>
<div class="note">
<p>
The result of the above code is not to actually apply the feature
engineering steps but, rather, to create an object that holds the
feature engineering logic (or recipe) to be applied later on.
</p>
</div>
</div>
<div id="numeric-features" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Numeric features<a href="lesson-2a-feature-engineering.html#numeric-features" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Numeric features can create a host of problems for certain models when their distributions are skewed, contain outliers, or have a wide range in magnitudes. Tree-based models are quite immune to these types of problems in the feature space, but many other models (e.g., GLMs, regularized regression, KNN, support vector machines, neural networks) can be greatly hampered by these issues. Normalizing and standardizing heavily skewed features can help minimize these concerns.</p>
<div id="skewness" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Skewness<a href="lesson-2a-feature-engineering.html#skewness" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Parametric models that have distributional assumptions (e.g., GLMs, and regularized models) can benefit from minimizing the skewness of numeric features. When normalizing many variables, it’s best to use the Box-Cox (when feature values are strictly positive) or Yeo-Johnson (when feature values are not strictly positive) procedures as these methods will identify if a transformation is required and what the optimal transformation will be.</p>
<div class="tip">
<p>
Non-parametric models are rarely affected by skewed features;
however, normalizing features will not have a negative effect on these
models’ performance. For example, normalizing features will only shift
the optimal split points in tree-based algorithms. Consequently, when in
doubt, normalize.
</p>
</div>
<p>We can normalize our numeric predictor variables with <code>step_YeoJohnson()</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="lesson-2a-feature-engineering.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalize all numeric features</span></span>
<span id="cb28-2"><a href="lesson-2a-feature-engineering.html#cb28-2" aria-hidden="true" tabindex="-1"></a>X_norm <span class="ot">&lt;-</span> ames_recipe <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="lesson-2a-feature-engineering.html#cb28-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>(), <span class="fu">all_numeric</span>())                 </span></code></pre></div>
</div>
<div id="standardization" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Standardization<a href="lesson-2a-feature-engineering.html#standardization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We must also consider the scale on which the individual features are measured. What are the largest and smallest values across all features and do they span several orders of magnitude? Models that incorporate smooth functions of input features are sensitive to the scale of the inputs. For example, <span class="math inline">\(5X+2\)</span> is a simple linear function of the input <em>X</em>, and the scale of its output depends directly on the scale of the input. Many algorithms use linear functions within their algorithms, some more obvious (e.g., GLMs and regularized regression) than others (e.g., neural networks, support vector machines, and principal components analysis). Other examples include algorithms that use distance measures such as the Euclidean distance (e.g., <em>k</em> nearest neighbor, <em>k</em>-means clustering, and hierarchical clustering).</p>
<p>For these models and modeling components, it is often a good idea to standardize the features. Standardizing features includes <em>centering</em> and <em>scaling</em> so that numeric variables have zero mean and unit variance, which provides a common comparable unit of measure across all the variables.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:engineering-standardizing"></span>
<img src="_main_files/figure-html/engineering-standardizing-1.png" alt="Standardizing features allows all features to be compared on a common value scale regardless of their real value differences." width="768" />
<p class="caption">
Figure 5.1: Standardizing features allows all features to be compared on a common value scale regardless of their real value differences.
</p>
</div>
<p>We can standardize our numeric features in one of two ways – note that <code>step_normalize()</code> is just a wrapper that combines <code>step_center()</code> and <code>step_scale()</code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="lesson-2a-feature-engineering.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># option 1</span></span>
<span id="cb29-2"><a href="lesson-2a-feature-engineering.html#cb29-2" aria-hidden="true" tabindex="-1"></a>std <span class="ot">&lt;-</span> ames_recipe <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="lesson-2a-feature-engineering.html#cb29-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_center</span>(<span class="fu">predictors</span>(), <span class="fu">all_numeric</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="lesson-2a-feature-engineering.html#cb29-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_scale</span>(<span class="fu">predictors</span>(), <span class="fu">all_numeric</span>())</span>
<span id="cb29-5"><a href="lesson-2a-feature-engineering.html#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="lesson-2a-feature-engineering.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># option 2</span></span>
<span id="cb29-7"><a href="lesson-2a-feature-engineering.html#cb29-7" aria-hidden="true" tabindex="-1"></a>std <span class="ot">&lt;-</span> ames_recipe <span class="sc">%&gt;%</span></span>
<span id="cb29-8"><a href="lesson-2a-feature-engineering.html#cb29-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_normalize</span>(<span class="fu">predictors</span>(), <span class="fu">all_numeric</span>())</span></code></pre></div>
</div>
</div>
<div id="categorical-features" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Categorical features<a href="lesson-2a-feature-engineering.html#categorical-features" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Most models require that the predictors take numeric form. There are exceptions; for example, tree-based models naturally handle numeric or categorical features. However, even tree-based models can benefit from pre-processing categorical features. The following sections will discuss a few of the more common approaches to engineer categorical features.</p>
<div id="one-hot-dummy-encoding" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> One-hot &amp; dummy encoding<a href="lesson-2a-feature-engineering.html#one-hot-dummy-encoding" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many ways to recode categorical variables as numeric. The most common is referred to as one-hot encoding, where we transpose our categorical variables so that each level of the feature is represented as a boolean value. For example, one-hot encoding the left data frame in the below figure results in <code>X</code> being converted into three columns, one for each level. This is called less than <em>full rank</em> encoding . However, this creates perfect collinearity which causes problems with some predictive modeling algorithms (e.g., ordinary linear regression and neural networks). Alternatively, we can create a full-rank encoding by dropping one of the levels (level <code>c</code> has been dropped). This is referred to as <em>dummy</em> encoding.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:engineering-one-hot"></span>
<img src="images/ohe-vs-dummy.png" alt="Eight observations containing a categorical feature X and the difference in how one-hot and dummy encoding transforms this feature." width="99%" height="99%" />
<p class="caption">
Figure 5.2: Eight observations containing a categorical feature X and the difference in how one-hot and dummy encoding transforms this feature.
</p>
</div>
<p>We can use <code>step_dummy()</code> to add a one-hot or dummy encoding to our recipe:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="lesson-2a-feature-engineering.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># one-hot encode</span></span>
<span id="cb30-2"><a href="lesson-2a-feature-engineering.html#cb30-2" aria-hidden="true" tabindex="-1"></a>ohe <span class="ot">&lt;-</span> ames_recipe <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="lesson-2a-feature-engineering.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>(), <span class="at">one_hot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb30-4"><a href="lesson-2a-feature-engineering.html#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="lesson-2a-feature-engineering.html#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dummy encode</span></span>
<span id="cb30-6"><a href="lesson-2a-feature-engineering.html#cb30-6" aria-hidden="true" tabindex="-1"></a>de <span class="ot">&lt;-</span> ames_recipe <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="lesson-2a-feature-engineering.html#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>(), <span class="at">one_hot =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="ordinal-encoding" class="section level3 hasAnchor" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> Ordinal encoding<a href="lesson-2a-feature-engineering.html#ordinal-encoding" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If a categorical feature is naturally ordered then numerically encoding the feature based on its order is a natural choice (most commonly referred to as ordinal encoding). For example, the various quality features in the Ames housing data are ordinal in nature (ranging from <code>Very_Poor</code> to <code>Very_Excellent</code>).</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="lesson-2a-feature-engineering.html#cb31-1" aria-hidden="true" tabindex="-1"></a>train <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&#39;Qual$|QC$|_Cond$&#39;</span>))</span>
<span id="cb31-2"><a href="lesson-2a-feature-engineering.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2,051 × 11</span></span>
<span id="cb31-3"><a href="lesson-2a-feature-engineering.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    Overall_Qual  Overal…¹ Exter…² Exter…³ Bsmt_…⁴ Bsmt_…⁵ Heati…⁶ Kitch…⁷ Garag…⁸ Garag…⁹</span></span>
<span id="cb31-4"><a href="lesson-2a-feature-engineering.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  </span></span>
<span id="cb31-5"><a href="lesson-2a-feature-engineering.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Very_Good     Average  Good    Typical Good    Good    Excell… Good    Typical Typical</span></span>
<span id="cb31-6"><a href="lesson-2a-feature-engineering.html#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Above_Average Average  Good    Typical Good    Typical Excell… Good    Typical Typical</span></span>
<span id="cb31-7"><a href="lesson-2a-feature-engineering.html#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Below_Average Average  Typical Typical Good    Typical Good    Good    Typical Typical</span></span>
<span id="cb31-8"><a href="lesson-2a-feature-engineering.html#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Very_Good     Average  Good    Typical Good    Typical Excell… Good    Typical Typical</span></span>
<span id="cb31-9"><a href="lesson-2a-feature-engineering.html#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Above_Average Good     Typical Typical Typical Good    Typical Typical Typical Typical</span></span>
<span id="cb31-10"><a href="lesson-2a-feature-engineering.html#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Good          Average  Good    Typical Good    Typical Excell… Good    Typical Typical</span></span>
<span id="cb31-11"><a href="lesson-2a-feature-engineering.html#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Above_Average Average  Typical Typical Good    Typical Excell… Good    Typical Typical</span></span>
<span id="cb31-12"><a href="lesson-2a-feature-engineering.html#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Average       Average  Typical Typical Typical Typical Typical Typical Typical Typical</span></span>
<span id="cb31-13"><a href="lesson-2a-feature-engineering.html#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Average       Good     Typical Typical Fair    Typical Typical Typical Typical Typical</span></span>
<span id="cb31-14"><a href="lesson-2a-feature-engineering.html#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Below_Average Average  Typical Typical Typical Typical Typical Typical Typical Typical</span></span>
<span id="cb31-15"><a href="lesson-2a-feature-engineering.html#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 2,041 more rows, 1 more variable: Pool_QC &lt;chr&gt;, and abbreviated variable names</span></span>
<span id="cb31-16"><a href="lesson-2a-feature-engineering.html#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="do">## #   ¹​Overall_Cond, ²​Exter_Qual, ³​Exter_Cond, ⁴​Bsmt_Qual, ⁵​Bsmt_Cond, ⁶​Heating_QC,</span></span>
<span id="cb31-17"><a href="lesson-2a-feature-engineering.html#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="do">## #   ⁷​Kitchen_Qual, ⁸​Garage_Qual, ⁹​Garage_Cond</span></span>
<span id="cb31-18"><a href="lesson-2a-feature-engineering.html#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</span></span></code></pre></div>
<p>Ordinal encoding these features provides a natural and intuitive interpretation and can logically be applied to all models.</p>
<p>If your features are already ordered factors then you can simply apply <code>step_ordinalscore()</code> to ordinal encode:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="lesson-2a-feature-engineering.html#cb32-1" aria-hidden="true" tabindex="-1"></a>ord <span class="ot">&lt;-</span> ames_recipe <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="lesson-2a-feature-engineering.html#cb32-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_ordinalscore</span>(<span class="fu">matches</span>(<span class="st">&#39;Qual$|QC$|_Cond$&#39;</span>))</span></code></pre></div>
<p>However, if we look at our quality features we see they are characters instead of factors and their levels are not ordered. Moreover, some have a unique value that represents that feature doesn’t exist in the house (i.e. <code>No_Basement</code>).</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="lesson-2a-feature-engineering.html#cb33-1" aria-hidden="true" tabindex="-1"></a>train <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Bsmt_Qual) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb33-2"><a href="lesson-2a-feature-engineering.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Good&quot;        &quot;Typical&quot;     &quot;Fair&quot;        &quot;Excellent&quot;   &quot;No_Basement&quot; &quot;Poor&quot;</span></span></code></pre></div>
<p>So in this case we’re going to apply several feature engineering steps to:</p>
<ol style="list-style-type: decimal">
<li>convert quality features to factors with specified levels,</li>
<li>convert any missed levels (i.e. No_Basement, No_Pool) to “None”,</li>
<li>convert factor level to integer value (‘Very_Poor’ = 1, ‘Poor’ = 2, …,
‘Excellent’ = 10, ‘Very_Excellent’ = 11)</li>
</ol>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="lesson-2a-feature-engineering.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify levels in order</span></span>
<span id="cb34-2"><a href="lesson-2a-feature-engineering.html#cb34-2" aria-hidden="true" tabindex="-1"></a>lvls <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Very_Poor&quot;</span>, <span class="st">&quot;Poor&quot;</span>, <span class="st">&quot;Fair&quot;</span>, <span class="st">&quot;Below_Average&quot;</span>, <span class="st">&quot;Average&quot;</span>, <span class="st">&quot;Typical&quot;</span>, </span>
<span id="cb34-3"><a href="lesson-2a-feature-engineering.html#cb34-3" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;Above_Average&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Very_Good&quot;</span>, <span class="st">&quot;Excellent&quot;</span>, <span class="st">&quot;Very_Excellent&quot;</span>)</span>
<span id="cb34-4"><a href="lesson-2a-feature-engineering.html#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="lesson-2a-feature-engineering.html#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># apply ordinal encoding to quality features</span></span>
<span id="cb34-6"><a href="lesson-2a-feature-engineering.html#cb34-6" aria-hidden="true" tabindex="-1"></a>ord_lbl <span class="ot">&lt;-</span> ames_recipe <span class="sc">%&gt;%</span></span>
<span id="cb34-7"><a href="lesson-2a-feature-engineering.html#cb34-7" aria-hidden="true" tabindex="-1"></a>   <span class="co"># 1. convert quality features to factors with specified levels</span></span>
<span id="cb34-8"><a href="lesson-2a-feature-engineering.html#cb34-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_string2factor</span>(<span class="fu">matches</span>(<span class="st">&#39;Qual$|QC$|_Cond$&#39;</span>), <span class="at">levels =</span> lvls, <span class="at">ordered =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-9"><a href="lesson-2a-feature-engineering.html#cb34-9" aria-hidden="true" tabindex="-1"></a>   <span class="co"># 2. convert any missed levels (i.e. No_Basement, No_Pool) to &quot;None&quot;</span></span>
<span id="cb34-10"><a href="lesson-2a-feature-engineering.html#cb34-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_unknown</span>(<span class="fu">matches</span>(<span class="st">&#39;Qual$|QC$|_Cond$&#39;</span>), <span class="at">new_level =</span> <span class="st">&quot;None&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-11"><a href="lesson-2a-feature-engineering.html#cb34-11" aria-hidden="true" tabindex="-1"></a>   <span class="co"># 3. convert factor level to integer value</span></span>
<span id="cb34-12"><a href="lesson-2a-feature-engineering.html#cb34-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_ordinalscore</span>(<span class="fu">matches</span>(<span class="st">&#39;Qual$|QC$|_Cond$&#39;</span>))</span></code></pre></div>
<p>Did this work, let’s take a look. If we want to apply a recipe to a data set we can apply:</p>
<ul>
<li><code>prep</code>: estimate feature engineering parameters based on training data.</li>
<li><code>bake</code>: apply the prepped recipe to new, or the existing (<code>new_data = NULL</code>) data.</li>
</ul>
<p>We can see that our quality variables are now ordinal encoded.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="lesson-2a-feature-engineering.html#cb35-1" aria-hidden="true" tabindex="-1"></a>baked_recipe <span class="ot">&lt;-</span> ord_lbl <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="lesson-2a-feature-engineering.html#cb35-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">prep</span>(<span class="at">strings_as_factor =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="lesson-2a-feature-engineering.html#cb35-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">bake</span>(<span class="at">new_data =</span> <span class="cn">NULL</span>)</span>
<span id="cb35-4"><a href="lesson-2a-feature-engineering.html#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="lesson-2a-feature-engineering.html#cb35-5" aria-hidden="true" tabindex="-1"></a>baked_recipe <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&#39;Qual$|QC$|_Cond$&#39;</span>))</span>
<span id="cb35-6"><a href="lesson-2a-feature-engineering.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2,051 × 11</span></span>
<span id="cb35-7"><a href="lesson-2a-feature-engineering.html#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    Overall_Qual Overall…¹ Exter…² Exter…³ Bsmt_…⁴ Bsmt_…⁵ Heati…⁶ Kitch…⁷ Garag…⁸ Garag…⁹</span></span>
<span id="cb35-8"><a href="lesson-2a-feature-engineering.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="do">##           &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb35-9"><a href="lesson-2a-feature-engineering.html#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  1            9         5       8       6       8       8      10       8       6       6</span></span>
<span id="cb35-10"><a href="lesson-2a-feature-engineering.html#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  2            7         5       8       6       8       6      10       8       6       6</span></span>
<span id="cb35-11"><a href="lesson-2a-feature-engineering.html#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  3            4         5       6       6       8       6       8       8       6       6</span></span>
<span id="cb35-12"><a href="lesson-2a-feature-engineering.html#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  4            9         5       8       6       8       6      10       8       6       6</span></span>
<span id="cb35-13"><a href="lesson-2a-feature-engineering.html#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  5            7         8       6       6       6       8       6       6       6       6</span></span>
<span id="cb35-14"><a href="lesson-2a-feature-engineering.html#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  6            8         5       8       6       8       6      10       8       6       6</span></span>
<span id="cb35-15"><a href="lesson-2a-feature-engineering.html#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  7            7         5       6       6       8       6      10       8       6       6</span></span>
<span id="cb35-16"><a href="lesson-2a-feature-engineering.html#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  8            5         5       6       6       6       6       6       6       6       6</span></span>
<span id="cb35-17"><a href="lesson-2a-feature-engineering.html#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  9            5         8       6       6       3       6       6       6       6       6</span></span>
<span id="cb35-18"><a href="lesson-2a-feature-engineering.html#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 10            4         5       6       6       6       6       6       6       6       6</span></span>
<span id="cb35-19"><a href="lesson-2a-feature-engineering.html#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 2,041 more rows, 1 more variable: Pool_QC &lt;dbl&gt;, and abbreviated variable names</span></span>
<span id="cb35-20"><a href="lesson-2a-feature-engineering.html#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="do">## #   ¹​Overall_Cond, ²​Exter_Qual, ³​Exter_Cond, ⁴​Bsmt_Qual, ⁵​Bsmt_Cond, ⁶​Heating_QC,</span></span>
<span id="cb35-21"><a href="lesson-2a-feature-engineering.html#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="do">## #   ⁷​Kitchen_Qual, ⁸​Garage_Qual, ⁹​Garage_Cond</span></span>
<span id="cb35-22"><a href="lesson-2a-feature-engineering.html#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</span></span></code></pre></div>
<p>And if we want to see how the numeric values are mapped to the original data we can. Here, I just focus on the original <code>Overall_Qual</code> values and how they compare to the encoded values.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="lesson-2a-feature-engineering.html#cb36-1" aria-hidden="true" tabindex="-1"></a>encoded_Overall_Qual <span class="ot">&lt;-</span> baked_recipe <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="lesson-2a-feature-engineering.html#cb36-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(Overall_Qual) <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="lesson-2a-feature-engineering.html#cb36-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">rename</span>(<span class="at">encoded_Overall_Qual =</span> Overall_Qual)</span>
<span id="cb36-4"><a href="lesson-2a-feature-engineering.html#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="lesson-2a-feature-engineering.html#cb36-5" aria-hidden="true" tabindex="-1"></a>train <span class="sc">%&gt;%</span></span>
<span id="cb36-6"><a href="lesson-2a-feature-engineering.html#cb36-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(Overall_Qual) <span class="sc">%&gt;%</span></span>
<span id="cb36-7"><a href="lesson-2a-feature-engineering.html#cb36-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">bind_cols</span>(encoded_Overall_Qual) <span class="sc">%&gt;%</span></span>
<span id="cb36-8"><a href="lesson-2a-feature-engineering.html#cb36-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">count</span>(Overall_Qual, encoded_Overall_Qual)</span>
<span id="cb36-9"><a href="lesson-2a-feature-engineering.html#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 10 × 3</span></span>
<span id="cb36-10"><a href="lesson-2a-feature-engineering.html#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="do">##    Overall_Qual   encoded_Overall_Qual     n</span></span>
<span id="cb36-11"><a href="lesson-2a-feature-engineering.html#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;                         &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb36-12"><a href="lesson-2a-feature-engineering.html#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Above_Average                     7   509</span></span>
<span id="cb36-13"><a href="lesson-2a-feature-engineering.html#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Average                           5   587</span></span>
<span id="cb36-14"><a href="lesson-2a-feature-engineering.html#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Below_Average                     4   168</span></span>
<span id="cb36-15"><a href="lesson-2a-feature-engineering.html#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Excellent                        10    65</span></span>
<span id="cb36-16"><a href="lesson-2a-feature-engineering.html#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Fair                              3    30</span></span>
<span id="cb36-17"><a href="lesson-2a-feature-engineering.html#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Good                              8   419</span></span>
<span id="cb36-18"><a href="lesson-2a-feature-engineering.html#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Poor                              2     9</span></span>
<span id="cb36-19"><a href="lesson-2a-feature-engineering.html#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Very_Excellent                   11    26</span></span>
<span id="cb36-20"><a href="lesson-2a-feature-engineering.html#cb36-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Very_Good                         9   235</span></span>
<span id="cb36-21"><a href="lesson-2a-feature-engineering.html#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Very_Poor                         1     3</span></span></code></pre></div>
</div>
<div id="lumping" class="section level3 hasAnchor" number="5.6.3">
<h3><span class="header-section-number">5.6.3</span> Lumping<a href="lesson-2a-feature-engineering.html#lumping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes features will contain levels that have very few observations. For example, there are 28 unique neighborhoods represented in the Ames housing data but several of them only have a few observations.</p>
<pre><code>## # A tibble: 28 × 2
##    Neighborhood            n
##    &lt;chr&gt;               &lt;int&gt;
##  1 Green_Hills             1
##  2 Landmark                1
##  3 Greens                  6
##  4 Blueste                 8
##  5 Northpark_Villa        16
##  6 Veenker                18
##  7 Briardale              20
##  8 Bloomington_Heights    22
##  9 Meadow_Village         26
## 10 Clear_Creek            29
## # … with 18 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>Sometimes we can benefit from collapsing, or “lumping” these into a lesser number of categories. In the above examples, we may want to collapse all levels that are observed in less than 1% of the training sample into an “other” category. We can use <code>step_other()</code> to do so. However, lumping should be used sparingly as there is often a loss in model performance <span class="citation">(<a href="#ref-apm" role="doc-biblioref">Kuhn and Johnson 2013</a>)</span>.</p>
<div class="tip">
<p>
Tree-based models often perform exceptionally well with high
cardinality features and are not as impacted by levels with small
representation.
</p>
</div>
<p>The following lumps all neighborhoods that represent less than 1% of observations into an “other” category.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="lesson-2a-feature-engineering.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lump levels for two features</span></span>
<span id="cb38-2"><a href="lesson-2a-feature-engineering.html#cb38-2" aria-hidden="true" tabindex="-1"></a>rare_encoder <span class="ot">&lt;-</span> ames_recipe <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="lesson-2a-feature-engineering.html#cb38-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_other</span>(Neighborhood, <span class="at">threshold =</span> <span class="fl">0.01</span>, <span class="at">other =</span> <span class="st">&quot;other&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="fit-a-model-with-a-recipe" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Fit a model with a recipe<a href="lesson-2a-feature-engineering.html#fit-a-model-with-a-recipe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s combine these feature engineering tasks into one recipe and then train a model with it.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="lesson-2a-feature-engineering.html#cb39-1" aria-hidden="true" tabindex="-1"></a>final_recipe <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Sale_Price <span class="sc">~</span> ., <span class="at">data =</span> train) <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="lesson-2a-feature-engineering.html#cb39-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_nzv</span>(<span class="fu">all_predictors</span>(), <span class="at">unique_cut =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="lesson-2a-feature-engineering.html#cb39-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_YeoJohnson</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="lesson-2a-feature-engineering.html#cb39-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="lesson-2a-feature-engineering.html#cb39-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_string2factor</span>(<span class="fu">matches</span>(<span class="st">&#39;Qual$|QC$|_Cond$&#39;</span>), <span class="at">levels =</span> lvls, <span class="at">ordered =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="lesson-2a-feature-engineering.html#cb39-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_unknown</span>(<span class="fu">matches</span>(<span class="st">&#39;Qual$|QC$|_Cond$&#39;</span>), <span class="at">new_level =</span> <span class="st">&quot;None&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-7"><a href="lesson-2a-feature-engineering.html#cb39-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_integer</span>(<span class="fu">matches</span>(<span class="st">&#39;Qual$|QC$|_Cond$&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb39-8"><a href="lesson-2a-feature-engineering.html#cb39-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_other</span>(<span class="fu">all_nominal_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.01</span>, <span class="at">other =</span> <span class="st">&quot;other&quot;</span>)</span></code></pre></div>
<p>Let’s go ahead and build a random forest model using the ranger engine (which is the default).</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="lesson-2a-feature-engineering.html#cb40-1" aria-hidden="true" tabindex="-1"></a>rf_mod <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="lesson-2a-feature-engineering.html#cb40-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">set_mode</span>(<span class="st">&#39;regression&#39;</span>)</span></code></pre></div>
<p>We will want to use our recipe across several steps as we train and test our model. We will:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Process the recipe using the training set</strong>: This involves any estimation or calculations based on the training set. For our recipe, the training set will be used to determine which predictors will have zero-variance in the training set, and should be slated for removal, what the mean and scale is in order to standardize the numeric features, etc.</p></li>
<li><p><strong>Apply the recipe to the training set</strong>: We create the final predictor set on the training set.</p></li>
<li><p><strong>Apply the recipe to the test set</strong>: We create the final predictor set on the test set. Nothing is recomputed and no information from the test set is used here; the feature engineering statistics computed from the training set are applied to the test set.</p></li>
</ol>
<p>To simplify this process, we can use a model workflow, which pairs a model and recipe together. This is a straightforward approach because different recipes are often needed for different models, so when a model and recipe are bundled, it becomes easier to train and test workflows. We’ll use the <a href="https://workflows.tidymodels.org/"><strong>workflows</strong> package</a> from tidymodels to bundle our parsnip model (<code>rf_mod</code>) with our recipe (<code>ames_recipe</code>).</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="lesson-2a-feature-engineering.html#cb41-1" aria-hidden="true" tabindex="-1"></a>rf_wflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="lesson-2a-feature-engineering.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(rf_mod) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="lesson-2a-feature-engineering.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(final_recipe)</span>
<span id="cb41-4"><a href="lesson-2a-feature-engineering.html#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="lesson-2a-feature-engineering.html#cb41-5" aria-hidden="true" tabindex="-1"></a>rf_wflow</span>
<span id="cb41-6"><a href="lesson-2a-feature-engineering.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="do">## ══ Workflow ═════════════════════════════════════════════════════════════════════════════</span></span>
<span id="cb41-7"><a href="lesson-2a-feature-engineering.html#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Preprocessor: Recipe</span></span>
<span id="cb41-8"><a href="lesson-2a-feature-engineering.html#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Model: rand_forest()</span></span>
<span id="cb41-9"><a href="lesson-2a-feature-engineering.html#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb41-10"><a href="lesson-2a-feature-engineering.html#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Preprocessor ─────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb41-11"><a href="lesson-2a-feature-engineering.html#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 7 Recipe Steps</span></span>
<span id="cb41-12"><a href="lesson-2a-feature-engineering.html#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb41-13"><a href="lesson-2a-feature-engineering.html#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="do">## • step_nzv()</span></span>
<span id="cb41-14"><a href="lesson-2a-feature-engineering.html#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="do">## • step_YeoJohnson()</span></span>
<span id="cb41-15"><a href="lesson-2a-feature-engineering.html#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="do">## • step_normalize()</span></span>
<span id="cb41-16"><a href="lesson-2a-feature-engineering.html#cb41-16" aria-hidden="true" tabindex="-1"></a><span class="do">## • step_string2factor()</span></span>
<span id="cb41-17"><a href="lesson-2a-feature-engineering.html#cb41-17" aria-hidden="true" tabindex="-1"></a><span class="do">## • step_unknown()</span></span>
<span id="cb41-18"><a href="lesson-2a-feature-engineering.html#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="do">## • step_integer()</span></span>
<span id="cb41-19"><a href="lesson-2a-feature-engineering.html#cb41-19" aria-hidden="true" tabindex="-1"></a><span class="do">## • step_other()</span></span>
<span id="cb41-20"><a href="lesson-2a-feature-engineering.html#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb41-21"><a href="lesson-2a-feature-engineering.html#cb41-21" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Model ────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb41-22"><a href="lesson-2a-feature-engineering.html#cb41-22" aria-hidden="true" tabindex="-1"></a><span class="do">## Random Forest Model Specification (regression)</span></span>
<span id="cb41-23"><a href="lesson-2a-feature-engineering.html#cb41-23" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb41-24"><a href="lesson-2a-feature-engineering.html#cb41-24" aria-hidden="true" tabindex="-1"></a><span class="do">## Computational engine: ranger</span></span></code></pre></div>
<p>Now, there is a single function that can be used to prepare the recipe and train the model from the resulting predictors:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="lesson-2a-feature-engineering.html#cb42-1" aria-hidden="true" tabindex="-1"></a>rf_fit <span class="ot">&lt;-</span> rf_wflow <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="lesson-2a-feature-engineering.html#cb42-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">fit</span>(<span class="at">data =</span> train)</span></code></pre></div>
<p>The <code>rf_fit</code> object has the finalized recipe and fitted model objects inside. You may want to extract the model or recipe objects from the workflow. To do this, you can use the helper functions <code>extract_fit_parsnip()</code> and <code>extract_recipe()</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="lesson-2a-feature-engineering.html#cb43-1" aria-hidden="true" tabindex="-1"></a>rf_fit <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="lesson-2a-feature-engineering.html#cb43-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">extract_fit_parsnip</span>()</span>
<span id="cb43-3"><a href="lesson-2a-feature-engineering.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="do">## parsnip model object</span></span>
<span id="cb43-4"><a href="lesson-2a-feature-engineering.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb43-5"><a href="lesson-2a-feature-engineering.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Ranger result</span></span>
<span id="cb43-6"><a href="lesson-2a-feature-engineering.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb43-7"><a href="lesson-2a-feature-engineering.html#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Call:</span></span>
<span id="cb43-8"><a href="lesson-2a-feature-engineering.html#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  ranger::ranger(x = maybe_data_frame(x), y = y, num.threads = 1,      verbose = FALSE, seed = sample.int(10^5, 1)) </span></span>
<span id="cb43-9"><a href="lesson-2a-feature-engineering.html#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb43-10"><a href="lesson-2a-feature-engineering.html#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Type:                             Regression </span></span>
<span id="cb43-11"><a href="lesson-2a-feature-engineering.html#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Number of trees:                  500 </span></span>
<span id="cb43-12"><a href="lesson-2a-feature-engineering.html#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Sample size:                      2051 </span></span>
<span id="cb43-13"><a href="lesson-2a-feature-engineering.html#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="do">## Number of independent variables:  59 </span></span>
<span id="cb43-14"><a href="lesson-2a-feature-engineering.html#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Mtry:                             7 </span></span>
<span id="cb43-15"><a href="lesson-2a-feature-engineering.html#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Target node size:                 5 </span></span>
<span id="cb43-16"><a href="lesson-2a-feature-engineering.html#cb43-16" aria-hidden="true" tabindex="-1"></a><span class="do">## Variable importance mode:         none </span></span>
<span id="cb43-17"><a href="lesson-2a-feature-engineering.html#cb43-17" aria-hidden="true" tabindex="-1"></a><span class="do">## Splitrule:                        variance </span></span>
<span id="cb43-18"><a href="lesson-2a-feature-engineering.html#cb43-18" aria-hidden="true" tabindex="-1"></a><span class="do">## OOB prediction error (MSE):       711286135 </span></span>
<span id="cb43-19"><a href="lesson-2a-feature-engineering.html#cb43-19" aria-hidden="true" tabindex="-1"></a><span class="do">## R squared (OOB):                  0.8895076</span></span></code></pre></div>
<p>Just as in the last lesson, we can make predictions with our fit model object and evaluate the model performance. Here, we compute the RMSE on our test data and we see we have a much better performance than previous models.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="lesson-2a-feature-engineering.html#cb44-1" aria-hidden="true" tabindex="-1"></a>rf_fit <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="lesson-2a-feature-engineering.html#cb44-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">predict</span>(test) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="lesson-2a-feature-engineering.html#cb44-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">bind_cols</span>(test <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sale_Price)) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="lesson-2a-feature-engineering.html#cb44-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">rmse</span>(<span class="at">truth =</span> Sale_Price, <span class="at">estimate =</span> .pred)</span>
<span id="cb44-5"><a href="lesson-2a-feature-engineering.html#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 3</span></span>
<span id="cb44-6"><a href="lesson-2a-feature-engineering.html#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   .metric .estimator .estimate</span></span>
<span id="cb44-7"><a href="lesson-2a-feature-engineering.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb44-8"><a href="lesson-2a-feature-engineering.html#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 rmse    standard      26546.</span></span></code></pre></div>
<div class="note">
<p>
This improved performance could be a result of using a model that
fits the data better, using more features, or from the feature
engineering. Or, most likely, a combination of all the above!
</p>
</div>
</div>
<div id="exercises-2" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Exercises<a href="lesson-2a-feature-engineering.html#exercises-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="todo">
<p>
Using the ames housing data…
</p>
<ol style="list-style-type: decimal">
<li>
Rather than ordinal encode the quality and condition features,
one-hot encode these features.
</li>
<li>
What is the difference in the number of features in your training
set?
</li>
<li>
Apply this new recipe to the same random forest model and compute
the test RMSE. How does the performance differ?
</li>
<li>
Identify three new feature engineering steps that are provided by <a
href="https://recipes.tidymodels.org/">recipes</a>:
<ul>
<li>
Why would these feature engineering steps be applicable to the Ames
data?
</li>
<li>
Apply these feature engineering steps along with the same random
forest model. How do your results change?
</li>
</ul>
</li>
</ol>
</div>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-apm" class="csl-entry">
Kuhn, Max, and Kjell Johnson. 2013. <em>Applied Predictive Modeling</em>. Vol. 26. Springer.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="overview-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lesson-2b-model-evaluation-selection.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bradleyboehmke/uc-bana-4080/edit/master/module-2/lesson-1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
